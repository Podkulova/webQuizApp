<div class="step-text">
<p></p><h5 id="description">Description</h5><p>At this last stage, your service will be improved to perform some trickier requests and return paginated responses. From the client's point of view, only a small part of API will be changed here.</p><p>To get all existing quizzes in the service, the client sends the <code class="language-json">GET</code> request to <code class="language-json">/api/quizzes</code> as before. But here is the problem: the number of stored quizzes can be very large since your service is so popular among so many users.</p><p>In this regard, your API should return only <strong>10</strong> quizzes at once and support the ability to specify which portion of quizzes is needed (paging).</p><p> </p><p></p><div class="alert alert-warning"><p></p><p>Please, use the standard libraries for the pagination.</p><p></p></div><p></p><p> </p><p>Further, your API should return information about successful completions of quizzes by the authenticated user. This endpoint should also support paging.</p><h5 id="objectives">Objectives</h5><p>1 Update the endpoint for getting quizzes. Now it should accept the <code class="language-json">page</code> parameter <code class="language-json">/api/quizzes?page={number}</code> together with user authentication data so that the API supports the navigation through pages. The first page is <strong>0</strong> since pages start from zero, just like our quizzes.</p><p>The response should contains a JSON with quizzes (inside <code class="language-json">content</code>) and some additional metadata:</p><pre><code class="language-json">{
  "totalPages":1,
  "totalElements":3,
  "last":true,
  "first":true,
  "sort":{ },
  "number":0,
  "numberOfElements":3,
  "size":10,
  "empty":false,
  "pageable": { },
  "content":[
    {"id":&lt;quiz id&gt;,"title":"&lt;string&gt;","text":"&lt;string&gt;","options":["&lt;string&gt;","&lt;string&gt;","&lt;string&gt;", ...]},
    {"id":&lt;quiz id&gt;,"title":"&lt;string&gt;","text":"&lt;string&gt;","options":["&lt;string&gt;", "&lt;string&gt;", ...]},
    {"id":&lt;quiz id&gt;,"title":"&lt;string&gt;","text":"&lt;string&gt;","options":["&lt;string&gt;","&lt;string&gt;", ...]}
  ]
}</code></pre><p>We've simplified JSON a bit, but you can keep it in the same format it is generated by the framework when you return <code class="language-json">Page&lt;T&gt;</code> instead of <code class="language-json">List&lt;T&gt;</code>. Our tests will validate only the essential fields.</p><p>If there are no quizzes, <code class="language-json">content</code> is empty <code class="language-json">[]</code>. If the user is authorized, the status code is <code class="language-json">200 (OK)</code>; otherwise, it's <code class="language-json">401 (UNAUTHORIZED)</code>.</p><p>2 Create the <code class="language-json">GET</code> <code class="language-json">/api/quizzes/completed?page={number}</code> endpoint that will accept the <code class="language-json">page</code> parameter together with the user auth data to provide the specified part of all completions of quizzes for the authenticated user. Each completion should be represented by a JSON object in the following format:</p><pre><code class="language-json">{
  "id": &lt;quiz id&gt;,
  "completedAt": &lt;DATE_TIME in ISO Date Time Format (yyyy-MM-dd'T'HH:mm:ss.SSSXXX)&gt;
}</code></pre><p>A response is divided into pages since the service may return a lot of data. It contains a JSON with quiz completions (inside <code class="language-json">content</code>) and some additional metadata as in the previous operation.</p><p>Here is a response example:</p><pre><code class="language-json">{
  "totalPages":1,
  "totalElements":5,
  "last":true,
  "first":true,
  "empty":false,
  "content":[
    {"id":&lt;quiz id&gt;,"completedAt":"&lt;date_time&gt;"},
    {"id":&lt;quiz id&gt;,"completedAt":"&lt;date_time&gt;"},
    {"id":&lt;quiz id&gt;,"completedAt":"&lt;date_time&gt;"},
    {"id":&lt;quiz id&gt;,"completedAt":"&lt;date_time&gt;"},
    {"id":&lt;quiz id&gt;,"completedAt":"&lt;date_time&gt;"}
  ]
}</code></pre><p>Since it is allowed to solve a quiz multiple times, the response may contain duplicate quizzes, but with the different completion date. The completions must be <strong>sorted by their completion time</strong> in descending order, i.e. newer completions first, older completions last.</p><p>We removed some metadata keys from the response to keep it comprehensible.</p><p>If there are no completed quizzes for the authenticated user, <code class="language-json">content</code> is empty <code class="language-json">[]</code>. If the user is authenticated, the status code is <code class="language-json">200 (OK)</code>; otherwise, it's <code class="language-json">401 (UNAUTHORIZED)</code>.</p><h5 id="a-few-words-in-the-end">A few words in the end</h5><p>Good job! You can put this project on GitHub as an example of your work and your expertise. Just don't forget to write a clear description in the README and refer Hyperskill :) It may also be useful for you to get a code review, at least for the last stage of the project.</p><p>If you would like to continue the project, you can develop a web or mobile client for this web service.</p><h5 id="examples">Examples</h5><p><strong>Example 1</strong>: <em>getting the first page of the total list of quizzes with a valid authentication</em>:</p><p><em>Request</em>: <code class="language-json">GET /api/quizzes?page=1</code></p><p><em>Response code</em>: <code class="language-json">200 OK</code></p><p><em>Response body</em>:</p><pre><code class="language-json">{
  "totalPages":1,
  "totalElements":3,
  "last":true,
  "first":true,
  "sort":{ },
  "number":0,
  "numberOfElements":3,
  "size":10,
  "empty":false,
  "pageable": { },
  "content":[
    {"id":102,"title":"Test 1","text":"Text 1","options":["a","b","c"]},
    {"id":103,"title":"Test 2","text":"Text 2","options":["a", "b", "c", "d"]},
    {"id":202,"title":"The Java Logo","text":"What is depicted on the Java logo?",
     "options":["Robot","Tea leaf","Cup of coffee","Bug"]}
  ]
}</code></pre><p><strong>Example 2</strong>: <em>getting the first page of the total list of quizzes with an invalid authentication</em>:</p><p><em>Request</em>: <code class="language-json">GET /api/quizzes?page=1</code></p><p><em>Response</em>: <code class="language-json">401 UNAUTHORIZED</code></p><p><strong>Example 3</strong>: <em>getting the first page of the total list of quiz completions for the authenticated user</em>:</p><p><em>Request</em>: <code class="language-json">GET /api/quizzes/completed?page=1</code></p><p><em>Response code</em>: <code class="language-json">200 OK</code></p><p><em>Response body</em>:</p><pre><code class="language-json">{
  "totalPages":1,
  "totalElements":5,
  "last":true,
  "first":true,
  "empty":false,
  "content":[
    {"id":103,"completedAt":"2019-10-29T21:13:53.779542"},
    {"id":102,"completedAt":"2019-10-29T21:13:52.324993"},
    {"id":101,"completedAt":"2019-10-29T18:59:58.387267"},
    {"id":101,"completedAt":"2019-10-29T18:59:55.303268"},
    {"id":202,"completedAt":"2019-10-29T18:59:54.033801"}
  ]
}</code></pre><p><strong>Example 4</strong>: <em>getting the first page of the total list of quiz completions with an invalid authentication</em>:</p><p><em>Request</em>: <code class="language-json">GET /api/quizzes/completed?page=1</code></p><p><em>Response</em>: <code class="language-json">401 UNAUTHORIZED</code></p>
</div>